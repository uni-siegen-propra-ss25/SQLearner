<h2 mat-dialog-title>Tabelle bearbeiten</h2>
<form [formGroup]="tableForm" (ngSubmit)="onSubmit()">
  <mat-dialog-content>
    <mat-form-field class="full-width">
      <mat-label>Tabellenname</mat-label>
      <input matInput formControlName="name" required>
      <mat-hint>Der Name muss mit einem Buchstaben oder Unterstrich beginnen</mat-hint>
    </mat-form-field>

    <div formArrayName="columns" class="columns-container">
      <h3>Spalten</h3>
      <div *ngFor="let column of columns.controls; let i=index" [formGroupName]="i" class="column-row">
        <mat-form-field>
          <mat-label>Name</mat-label>
          <input matInput formControlName="name" required>
          <mat-hint>Spaltenname muss eindeutig sein</mat-hint>
        </mat-form-field>

        <mat-form-field>
          <mat-label>Typ</mat-label>
          <mat-select formControlName="type" required>
            <mat-option value="INTEGER">INTEGER</mat-option>
            <mat-option value="TEXT">TEXT</mat-option>
            <mat-option value="BOOLEAN">BOOLEAN</mat-option>
            <mat-option value="FLOAT">FLOAT</mat-option>
            <mat-option value="DATE">DATE</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-checkbox formControlName="isPrimaryKey">Primary Key</mat-checkbox>
        <mat-checkbox formControlName="isNullable">Nullable</mat-checkbox>

        <button mat-icon-button class="delete-button" type="button" (click)="removeColumn(i)"
                [disabled]="columns.length <= 1 || column.get('isPrimaryKey')?.value">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
      
      <button mat-stroked-button type="button" (click)="addColumn()" class="add-column-button">
        <mat-icon>add</mat-icon> Spalte hinzuf√ºgen
      </button>
    </div>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button type="button" (click)="cancel()">Abbrechen</button>
    <button mat-raised-button color="primary" type="submit" 
            [disabled]="!tableForm.valid">Speichern</button>
  </mat-dialog-actions>
</form>
